<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to the Menu</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Using the Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /*
          This CSS class is for the hidden state of the sub-buttons container.
          'max-h-0' and 'opacity-0' hide the content and make it take up no space.
          'transform' is used to make the content initially invisible by scaling it vertically.
          The 'transition-all' class from Tailwind CSS will animate the changes.
        */
        .hidden-menu {
            max-height: 0;
            opacity: 0;
            transform: scaleY(0);
            transform-origin: top; /* Animation starts from the top */
        }

        /*
          This class is added by JavaScript to show the sub-buttons container.
          'max-h-[500px]' is a large height value to ensure the container can expand.
          'opacity-100' makes the content fully visible.
          'transform: scaleY(1)' returns the container to its normal size.
        */
        .active-menu {
            max-height: 500px;
            opacity: 100;
            transform: scaleY(1);
        }

        /*
          This CSS customizes the appearance of the volume slider for better visuals.
        */
        input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          height: 12px;
          width: 12px;
          background: #3B82F6; /* Blue-600 */
          border-radius: 50%;
          cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
          height: 12px;
          width: 12px;
          background: #3B82F6; /* Blue-600 */
          border-radius: 50%;
          cursor: pointer;
        }

        /* Hide the slider initially and animate its appearance */
        .slider-wrapper {
            opacity: 0;
            max-height: 0;
            transition: all 0.3s ease-in-out;
        }

        .group:hover .slider-wrapper {
            opacity: 1;
            max-height: 50px;
        }
        
        /* CSS for the new play button tray */
        .hidden-play-tray {
            opacity: 0;
            transform: translateY(-20px); /* Moves the tray up, hiding it */
            transition: all 0.3s ease-in-out;
            pointer-events: none; /* Disables interaction when hidden */
        }
        
        .active-play-tray {
            opacity: 100;
            transform: translateY(0); /* Slides the tray down to its normal position */
            pointer-events: auto; /* Enables interaction when active */
        }

        /* CSS for the new album art tray that slides from the right */
        .hidden-album-tray {
            opacity: 0;
            transform: translateX(100%); /* Moves the tray off-screen to the right */
            transition: all 0.3s ease-in-out;
            pointer-events: none; /* Disables interaction when hidden */
        }
        
        .active-album-tray {
            opacity: 100;
            transform: translateX(0); /* Slides the tray to its normal position */
            pointer-events: auto; /* Enables interaction when active */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="flex flex-col items-center">
        <!-- The new header text -->
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-8 text-center">
            Welcome
        </h1>
        
        <!-- Main button and music control -->
        <div class="flex gap-4">
            <button id="main-button"
                    class="bg-blue-600 text-white font-bold py-3 px-8 rounded-xl
                           shadow-lg hover:shadow-xl
                           transition-all duration-300 transform
                           hover:scale-110
                           focus:outline-none focus:ring-4 focus:ring-blue-300
                           active:scale-95 text-center">
                Click to Show Menu
            </button>

            <!-- Music control container with the group hover utility -->
            <div class="relative group flex items-center justify-center h-12 w-12 rounded-xl">
                <!-- Speaker icon button -->
                <button id="speaker-button"
                        class="bg-gray-700 text-white rounded-full p-2
                               shadow-lg hover:shadow-xl
                               transition-all duration-300 transform
                               hover:scale-110
                               focus:outline-none focus:ring-4 focus:ring-gray-300
                               active:scale-95">
                    <img src="https://iili.io/FDcmKZJ.png"
                         alt="Sound Icon"
                         class="w-8 h-8">
                </button>
                <!-- Volume slider that appears on hover -->
                <div class="absolute bottom-full mb-2 slider-wrapper">
                    <input type="range" id="volume-slider" min="0" max="100" value="50" class="w-32 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer">
                </div>
                
                <!-- Play/Pause button tray that slides out from the bottom -->
                <div id="play-tray" class="absolute top-full flex flex-col items-center p-1.5 bg-gray-700 text-white rounded-xl shadow-lg hidden-play-tray overflow-hidden">
                    <button id="play-pause-button" class="py-1.5 px-3 text-sm rounded-lg hover:bg-gray-600 transition-colors">
                        &#9658; <!-- Play icon -->
                    </button>
                </div>

                <!-- Album art tray that slides out from the right -->
                <div id="album-tray" class="absolute left-full ml-2 flex flex-col p-2 bg-gray-700 text-white rounded-xl shadow-lg hidden-album-tray overflow-hidden">
                    <button class="album-art-button p-1.5 text-sm rounded-lg hover:bg-gray-600 transition-colors" data-src="audio/bg-music.mp3">
                        <img src="https://i1.sndcdn.com/artworks-sTntRmSgZTgc-0-t500x500.jpg" alt="flashing lights" class="rounded-md">
                    </button>
                    <button class="album-art-button p-1.5 text-sm rounded-lg hover:bg-gray-600 transition-colors" data-src="audio/upbeat.mp3">
                        <img src="https://placehold.co/60x60/34D399/FFFFFF?text=Album+2" alt="Album Cover 2" class="rounded-md">
                    </button>
                    <button class="album-art-button p-1.5 text-sm rounded-lg hover:bg-gray-600 transition-colors" data-src="audio/relaxing.mp3">
                        <img src="https://placehold.co/60x60/FCD34D/FFFFFF?text=Album+3" alt="Album Cover 3" class="rounded-md">
                    </button>
                </div>
            </div>
        </div>

        <!-- Container for the 5 buttons, now arranged side-by-side -->
        <div id="sub-buttons-container"
             class="flex flex-row justify-center gap-4 mt-8
                    hidden-menu transition-all duration-500 ease-in-out">

            <!-- The five dynamically appearing buttons, now with the same styling as the main button -->
            <a href="math.html" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl
                           shadow-lg hover:shadow-xl
                           transition-all duration-300 transform
                           hover:scale-110
                           focus:outline-none focus:ring-4 focus:ring-blue-300
                           active:scale-95 text-center">
                Math Games
            </a>
            <a href="download-app-page.html" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl
                           shadow-lg hover:shadow-xl
                           transition-all duration-300 transform
                           hover:scale-110
                           focus:outline-none focus:ring-4 focus:ring-blue-300
                           active:scale-95 text-center">
                Apps
            </a>
            <a href="music.html" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl
                           shadow-lg hover:shadow-xl
                           transition-all duration-300 transform
                           hover:scale-110
                           focus:outline-none focus:ring-4 focus:ring-blue-300
                           active:scale-95 text-center">
                Music
            </a>
            <a href="embeds.html" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl
                           shadow-lg hover:shadow-xl
                           transition-all duration-300 transform
                           hover:scale-110
                           focus:outline-none focus:ring-4 focus:ring-blue-300
                           active:scale-95 text-center">
                Embedded Content
            </a>
            <a href="page5.html" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl
                           shadow-lg hover:shadow-xl
                           transition-all duration-300 transform
                           hover:scale-110
                           focus:outline-none focus:ring-4 focus:ring-blue-300
                           active:scale-95 text-center">
                App 5
            </a>
        </div>
    </div>
    
    <!-- Audio element for playing local music -->
    <!-- The autoplay attribute will attempt to start the music automatically. -->
    <audio id="my-audio" src="audio/bg-music.mp3" loop autoplay></audio>

    <script>
        // Get references to the main button and the container for the sub-buttons
        const mainButton = document.getElementById('main-button');
        const subButtonsContainer = document.getElementById('sub-buttons-container');
        const speakerButton = document.getElementById('speaker-button');
        const volumeSlider = document.getElementById('volume-slider');
        const myAudio = document.getElementById('my-audio');
        const playTray = document.getElementById('play-tray');
        const playPauseButton = document.getElementById('play-pause-button');
        const albumTray = document.getElementById('album-tray');
        const albumArtButtons = document.querySelectorAll('.album-art-button');
        
        // Add a click event listener to the main button
        mainButton.addEventListener('click', () => {
            // Toggle the 'active-menu' class on the container to trigger the animation
            subButtonsContainer.classList.toggle('active-menu');
        });
        
        // ---- Audio Control Integration ----
        
        // Add a listener to the speaker button to toggle both trays at the same time
        speakerButton.addEventListener('click', () => {
            playTray.classList.toggle('active-play-tray');
            albumTray.classList.toggle('active-album-tray');
        });

        // Add a listener to the volume slider to control the volume
        volumeSlider.addEventListener('input', (e) => {
            // Set the audio volume based on the slider value (scaled from 0-100 to 0.0-1.0)
            myAudio.volume = e.target.value / 100;
        });

        // Add a listener to the play/pause button
        playPauseButton.addEventListener('click', () => {
            if (myAudio.paused) {
                myAudio.play();
                playPauseButton.innerHTML = '&#10074;&#10074;'; // Pause icon
            } else {
                myAudio.pause();
                playPauseButton.innerHTML = '&#9658;'; // Play icon
            }
        });

        // Add a click listener to each album art button
        albumArtButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Get the song URL from the data attribute
                const newSrc = button.getAttribute('data-src');
                // Change the audio source and play the new song
                myAudio.src = newSrc;
                myAudio.play();
                // Update the play/pause button icon to 'pause'
                playPauseButton.innerHTML = '&#10074;&#10074;';
            });
        });

        // Set initial volume to 50%
        myAudio.volume = 0.5;
        volumeSlider.value = 50;
    </script>
</body>
</html>
